---

if( Astro.request.method !== 'POST') {
    return Astro.redirect('/')
}

const data = await Astro.request.formData()
const password = data.get('password')

Astro.session?.set('auth', password === import.meta.env.APP_PASSWORD
    ? {
        userId : 1,
        userName : 'Josh',
    }
    : false
)

return Astro.redirect('/')
---