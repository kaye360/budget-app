---
import type { Budget } from '../../types/types'

interface BudgetWithTotals extends Budget {
    totalSpent : number
    percentSpent : number
}

interface Props {
    budget : BudgetWithTotals
    index : number
    isTotal? : boolean
}

const { budget, index, isTotal = false } = Astro.props
---

<div 
    class:list={[
        "relative rounded-sm flex items-center justify-between px-4 py-2 font-semibold",
        index % 5 === 0 && 'bg-blue/10',
        index % 5 === 1 && 'bg-green/10',
        index % 5 === 2 && 'bg-purple/10',
        index % 5 === 3 && 'bg-red/10',
        index % 5 === 4 && 'bg-orange/10',
        isTotal && '!bg-transparent'
    ]}
>
    <a href={`/transactions/budget/${budget.id}`} class="hover:underline">
        {budget.name} 
    </a>

    <span class="text-2xl">
        {budget.totalSpent} / {budget.amount}
    </span>

    <span 
        class:list={[
            "absolute left-0 top-0 bottom-0 -z-10 rounded-sm",
            index % 5 === 0 && 'bg-blue/20',
            index % 5 === 1 && 'bg-green/20',
            index % 5 === 2 && 'bg-purple/20',
            index % 5 === 3 && 'bg-red/20',
            index % 5 === 4 && 'bg-orange/20',
            isTotal && '!bg-slate-300'
        ]}
        style={`width : ${budget.percentSpent}%`}
    >
    </span>
</div>