---
import { actions } from "astro:actions";
import TransactionListLayout from "../../../layouts/TransactionListLayout.astro";
import TransactionList from "../components/TransactionList";
import type { Transaction as TransactionSchema } from "../schema/transaction.schema";
import Transaction from "../components/Transaction";

const [transactions, budgets] = await Promise.all([
	Astro.callAction( actions.transaction.index, {filter : 'uncategorized'} ),
	Astro.callAction( actions.budget.index, {} ),
])
---

<TransactionListLayout
	title="Uncategorized Transactions"
	active="uncategorized"
>
	
	<TransactionList>
		{ transactions.data.map( (transaction: TransactionSchema) => (
			<Transaction {transaction} budgets={budgets.data ?? []} actionButton="edit" client:idle />
		))}
	</TransactionList>

</TransactionListLayout>

