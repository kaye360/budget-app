---
import { actions } from "astro:actions"
import TransactionListLayout from "../../../layouts/TransactionListLayout.astro"
import InfiniteTransactionList from "../components/InfinteTransactionList"

const [transactions, budgets, accounts] = await Promise.all([
	Astro.callAction( actions.transaction.index, {filter : 'recent'} ),
	Astro.callAction( actions.budget.index, {} ),
	Astro.callAction( actions.accounts.index, {} )
])
---

<TransactionListLayout
	title="Recent Transactions"
	active="recent"
>

	<InfiniteTransactionList 
		initialTransactions={transactions.data.list} 
		budgets={budgets.data ?? []}
		accounts={accounts.data ?? []}
		actionButton="edit"
		client:idle 
	/>

</TransactionListLayout>

