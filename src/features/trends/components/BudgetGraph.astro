---
import { convertDate } from "../../../lib/convertDate"
import type { Transaction } from "../../transactions/schema/transaction.schema"
import { calcMonthRange, calcSpendingTotals, calcUpperRange } from "../utils/trendGraph.utils"
import GraphWrapper from "./GraphWrapper.astro"
import NetGraph from "./NetGraph.astro"

interface Props {
    transactions : Transaction[]
    budgetName : string
}

const { transactions, budgetName } = Astro.props
const spendingTotals = calcSpendingTotals(transactions)
const upperRange = calcUpperRange(spendingTotals)
const monthRange = calcMonthRange(spendingTotals)
---

<NetGraph 
    title={budgetName}
    monthRange={monthRange}
    spendingTotals={spendingTotals}
    upperRange={upperRange}
/>