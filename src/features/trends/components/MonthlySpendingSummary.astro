---
import { getBudgetPercentage } from '../../budgets/budget.utils'

interface Props {
    currentIncome : number | undefined
    totalIncome : number | undefined
    currentSpending : number | undefined
    totalSpending : number | undefined
}

const { 
    currentIncome,
    totalIncome,
    currentSpending,
    totalSpending,
} = Astro.props

---

<monthly-spending-summary class="mb-2">
    
    <spending-total class="relative rounded-sm flex items-center justify-between py-2 pb-4 min-w-fit">
        <monthly-spending-total class="text-lg font-semibold min-w-fit">
            {`${currentSpending ?? 0} / ${totalSpending ?? 0} spent`}
        </monthly-spending-total>
        <span 
            class="absolute left-0 bottom-0 h-3.75 -z-10 rounded-lg block bg-red/60 scale-y-105 origin-left progress-bar animate-progress-bar"
            style={`width : ${getBudgetPercentage(currentSpending, totalSpending)}%`}
        />
    </spending-total>
    
    <income-total class="relative rounded-sm flex items-center justify-between py-2 pb-4 min-w-fit">
        <monthly-income-total class="text-lg font-semibold min-w-fit">
            {`${currentIncome ?? 0} / ${totalIncome ?? 0} total income`}
        </monthly-income-total>
        <span 
            class="absolute left-0 bottom-0 h-3.75 -z-10 rounded-lg block bg-green/60 scale-y-105 origin-left progress-bar animate-progress-bar"
            style={`width : ${getBudgetPercentage(currentIncome, totalIncome)}%`}
        />
    </income-total>

</monthly-spending-summary>
